<html lang="sv">

<head>
  <meta charset="utf-8">
  <title>Start</title>
  <script src="/js/cookie-consent.umd.js"></script>
  <style>
    body {
      font-family: Arial, Helvetica, sans-serif;
    }
  </style>
  <script 
    type="text/plain"
    data-category="analytics"
  >
    alert('this script would set a cookie');
  </script>
  <script type="text/javascript">
    var _paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(['requireConsent']);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
      var u="//analytics.kb.se/";
      _paq.push(['setTrackerUrl', u+'matomo.php']);
      _paq.push(['setSiteId', '8']);
      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
      g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
    })();
  </script>
</head>

<body>
  <h1>Cookie consent example</h1>

  <p>
    See the source code for implementation
  </p>


  <a href="#" data-cc="show-preferencesModal">Inställningar för kakor</a>

  <script>
    /* Site specific config
      properties below override properties in default config */
    const myConfig = {
      categories: {
        necessary: {
          readOnly: true,
          enabled: true
        },
        analytics: {
          autoClear: {
            cookies: [
              {
                name: /^_pk.*/
              }
            ]
          }
        }
      },
      onConsent: ({ cookie }) => {
        if (cookie.categories.includes('analytics')) {
          window._paq = window._paq || [];
          window._paq.push(['rememberConsentGiven']);
        }
      },
      onChange: ({ cookie }) => {
        if (cookie.categories.includes('analytics')) {
          window._paq = window._paq || [];
          window._paq.push(['rememberConsentGiven']);
        } else {
          window._paq.push(['forgetConsentGiven']);
        }
      }
    };
    /* Run cookie consent script */
    KbCookieConsent.run(myConfig);
  </script>
</body>

</html>